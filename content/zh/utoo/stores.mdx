# 存储路径

import { FileTree, Callout, Tabs } from 'nextra/components'

utoo 使用多个目录存储配置、缓存和全局包。

## 目录结构

<FileTree>
  <FileTree.Folder name="~/.utoo" defaultOpen>
    <FileTree.File name="config.toml" />
  </FileTree.Folder>
  <FileTree.Folder name="~/.cache/nm" defaultOpen>
    <FileTree.Folder name="lodash">
      <FileTree.File name="4.17.21.tgz" />
    </FileTree.Folder>
    <FileTree.Folder name="react">
      <FileTree.File name="18.2.0.tgz" />
      <FileTree.File name="18.3.0.tgz" />
    </FileTree.Folder>
  </FileTree.Folder>
  <FileTree.Folder name="/usr/local" defaultOpen>
    <FileTree.Folder name="bin">
      <FileTree.File name="ut" />
      <FileTree.File name="tsc" />
    </FileTree.Folder>
    <FileTree.Folder name="lib/node_modules" defaultOpen>
      <FileTree.Folder name="typescript" />
    </FileTree.Folder>
  </FileTree.Folder>
</FileTree>

## 路径概览

| 路径 | 用途 |
|------|------|
| `~/.utoo/config.toml` | 全局配置文件 |
| `~/.cache/nm/` | 下载的包压缩包 |
| `{prefix}/lib/node_modules/` | 全局安装的包（与 npm 一致） |

## 包缓存

安装包时，utoo 会将压缩包缓存到 `~/.cache/nm/`：

<Callout>
  缓存的包会在项目间复用，加快后续安装速度。
</Callout>

### 清理缓存

<Tabs items={['清理全部', '清理指定', '查看位置']}>
  <Tabs.Tab>
```bash filename="Terminal" copy
ut clean
```
  </Tabs.Tab>
  <Tabs.Tab>
```bash filename="Terminal" copy
ut clean lodash
ut clean react*
```
  </Tabs.Tab>
  <Tabs.Tab>
```bash filename="Terminal" copy
ut config get cache-dir
```
  </Tabs.Tab>
</Tabs>

## 全局包

全局安装的包存储在 utoo 安装位置的相对路径，与 npm 一致（如 `/usr/local/lib/node_modules/`）：

```bash filename="Terminal" copy
# 全局安装
ut install -g typescript

# 存储位置
# /usr/local/lib/node_modules/typescript/
# /usr/local/bin/tsc
```

## 自定义路径

<Tabs items={['配置', '环境变量']}>
  <Tabs.Tab>
```bash filename="Terminal" copy
ut config set cache-dir /path/to/cache --global
```
  </Tabs.Tab>
  <Tabs.Tab>
```bash filename="Terminal" copy
export UTOO_CACHE_DIR=/path/to/cache
```
  </Tabs.Tab>
</Tabs>

## 项目文件

在每个项目中，utoo 使用：

<FileTree>
  <FileTree.Folder name="my-project" defaultOpen>
    <FileTree.File name="package.json" />
    <FileTree.File name="package-lock.json" />
    <FileTree.File name=".utoo.toml" />
    <FileTree.Folder name="node_modules">
      <FileTree.Folder name=".bin" />
      <FileTree.Folder name="lodash" />
      <FileTree.Folder name="react" />
    </FileTree.Folder>
  </FileTree.Folder>
</FileTree>

| 文件 | 用途 |
|------|------|
| `package.json` | 依赖清单 |
| `package-lock.json` | 依赖锁定文件 |
| `node_modules/` | 已安装的包 |
| `.utoo.toml` | 项目配置（可选） |
